os.getcwd D:\_devs\Python01\gitdev\dsa2
D:\_devs\Python01\gitdev\dsa2
D:/_devs/Python01/gitdev/dsa2/
D:/_devs/Python01/gitdev/dsa2/data/
{'model_pars': {'model_class': 'LGBMRegressor', 'model_path': '', 'model_pars': {'objective': 'huber'}, 'post_process_fun': <function airbnb_lightgbm.<locals>.post_process_fun at 0x00000255E6B6D400>, 'pre_process_pars': {'y_norm_fun': <function airbnb_lightgbm.<locals>.pre_process_fun at 0x00000255E6B6D488>, 'pipe_list': [{'uri': 'source/preprocessors.py::pd_coly', 'pars': {}, 'cols_family': 'coly', 'cols_out': 'coly', 'type': 'coly'}, {'uri': 'source/preprocessors.py::pd_colnum_bin', 'pars': {}, 'cols_family': 'colnum', 'cols_out': 'colnum_bin', 'type': ''}, {'uri': 'source/preprocessors.py::pd_colnum_binto_onehot', 'pars': {}, 'cols_family': 'colnum_bin', 'cols_out': 'colnum_onehot', 'type': ''}, {'uri': 'source/preprocessors.py::pd_colcat_bin', 'pars': {}, 'cols_family': 'colcat', 'cols_out': 'colcat_bin', 'type': ''}, {'uri': 'source/preprocessors.py::pd_colcat_to_onehot', 'pars': {}, 'cols_family': 'colcat_bin', 'cols_out': 'colcat_onehot', 'type': ''}, {'uri': 'source/preprocessors.py::pd_coltext', 'pars': {}, 'cols_family': 'coltext', 'cols_out': 'coltext_svd', 'type': ''}, {'uri': 'source/preprocessors.py::pd_coldate', 'pars': {}, 'cols_family': 'coldate', 'cols_out': 'coldate', 'type': ''}, {'uri': 'source/preprocessors.py::pd_colcross', 'pars': {}, 'cols_family': 'colcross', 'cols_out': 'colcross_pair_onehot', 'type': 'cross'}]}}, 'compute_pars': {'metric_list': ['root_mean_squared_error', 'mean_absolute_error', 'explained_variance_score', 'r2_score', 'median_absolute_error']}, 'data_pars': {'cols_input_type': {'coly': 'price', 'colid': 'id', 'colcat': ['cancellation_policy', 'host_response_rate', 'host_response_time'], 'colnum': ['review_scores_communication', 'review_scores_location', 'review_scores_rating'], 'coltext': ['house_rules', 'neighborhood_overview', 'notes', 'street'], 'coldate': ['calendar_last_scraped', 'first_review', 'host_since'], 'colcross': ['review_scores_communication', 'review_scores_location', 'cancellation_policy', 'host_response_rate']}, 'cols_model_group': ['colnum', 'colcat_bin', 'coltext_svd'], 'filter_pars': {'ymax': 100000.0, 'ymin': 0.0}}, 'global_pars': {'config_path': 'D:/_devs/Python01/gitdev/dsa2//airbnb_regression.py', 'config_name': 'airbnb_lightgbm', 'path_data_preprocess': 'D:/_devs/Python01/gitdev/dsa2//data/input/airbnb/train/', 'path_data_train': 'D:/_devs/Python01/gitdev/dsa2//data/input/airbnb/train/', 'path_data_test': 'D:/_devs/Python01/gitdev/dsa2//data/input/airbnb/test/', 'path_train_output': 'D:/_devs/Python01/gitdev/dsa2//data/output/airbnb/airbnb_lightgbm/', 'path_train_model': 'D:/_devs/Python01/gitdev/dsa2//data/output/airbnb/airbnb_lightgbm/model/', 'path_features_store': 'D:/_devs/Python01/gitdev/dsa2//data/output/airbnb/airbnb_lightgbm/features_store/', 'path_pipeline': 'D:/_devs/Python01/gitdev/dsa2//data/output/airbnb/airbnb_lightgbm/pipeline/', 'path_pred_data': 'D:/_devs/Python01/gitdev/dsa2//data/input/airbnb/test/', 'path_pred_pipeline': 'D:/_devs/Python01/gitdev/dsa2//data/output/airbnb/airbnb_lightgbm/pipeline/', 'path_pred_model': 'D:/_devs/Python01/gitdev/dsa2//data/output/airbnb/airbnb_lightgbm/model/', 'path_pred_output': 'D:/_devs/Python01/gitdev/dsa2//data/output/airbnb/pred_airbnb_lightgbm/', 'n_sample': 5000}}
D:/_devs/Python01/gitdev/dsa2/
os.getcwd D:\_devs\Python01\gitdev\dsa2
D:/_devs/Python01/gitdev/dsa2/
  ('#### Model Params Dynamic loading  ###############################################',) 

  ('D:\\_devs\\Python01\\gitdev',) 
D:\_devs\Python01\gitdev\dsa2
D:/_devs/Python01/gitdev/dsa2/
D:/_devs/Python01/gitdev/dsa2/data/
  ({'model_pars': {'model_class': 'LGBMRegressor', 'model_path': '', 'model_pars': {'objective': 'huber'}, 'post_process_fun': <function airbnb_lightgbm.<locals>.post_process_fun at 0x00000255E6B6D598>, 'pre_process_pars': {'y_norm_fun': <function airbnb_lightgbm.<locals>.pre_process_fun at 0x00000255E6B90B70>, 'pipe_list': [{'uri': 'source/preprocessors.py::pd_coly', 'pars': {}, 'cols_family': 'coly', 'cols_out': 'coly', 'type': 'coly'}, {'uri': 'source/preprocessors.py::pd_colnum_bin', 'pars': {}, 'cols_family': 'colnum', 'cols_out': 'colnum_bin', 'type': ''}, {'uri': 'source/preprocessors.py::pd_colnum_binto_onehot', 'pars': {}, 'cols_family': 'colnum_bin', 'cols_out': 'colnum_onehot', 'type': ''}, {'uri': 'source/preprocessors.py::pd_colcat_bin', 'pars': {}, 'cols_family': 'colcat', 'cols_out': 'colcat_bin', 'type': ''}, {'uri': 'source/preprocessors.py::pd_colcat_to_onehot', 'pars': {}, 'cols_family': 'colcat_bin', 'cols_out': 'colcat_onehot', 'type': ''}, {'uri': 'source/preprocessors.py::pd_coltext', 'pars': {}, 'cols_family': 'coltext', 'cols_out': 'coltext_svd', 'type': ''}, {'uri': 'source/preprocessors.py::pd_coldate', 'pars': {}, 'cols_family': 'coldate', 'cols_out': 'coldate', 'type': ''}, {'uri': 'source/preprocessors.py::pd_colcross', 'pars': {}, 'cols_family': 'colcross', 'cols_out': 'colcross_pair_onehot', 'type': 'cross'}]}}, 'compute_pars': {'metric_list': ['root_mean_squared_error', 'mean_absolute_error', 'explained_variance_score', 'r2_score', 'median_absolute_error']}, 'data_pars': {'cols_input_type': {'coly': 'price', 'colid': 'id', 'colcat': ['cancellation_policy', 'host_response_rate', 'host_response_time'], 'colnum': ['review_scores_communication', 'review_scores_location', 'review_scores_rating'], 'coltext': ['house_rules', 'neighborhood_overview', 'notes', 'street'], 'coldate': ['calendar_last_scraped', 'first_review', 'host_since'], 'colcross': ['review_scores_communication', 'review_scores_location', 'cancellation_policy', 'host_response_rate']}, 'cols_model_group': ['colnum', 'colcat_bin', 'coltext_svd'], 'filter_pars': {'ymax': 100000.0, 'ymin': 0.0}}, 'global_pars': {'config_path': 'D:/_devs/Python01/gitdev/dsa2//airbnb_regression.py', 'config_name': 'airbnb_lightgbm', 'path_data_preprocess': 'D:/_devs/Python01/gitdev/dsa2//data/input/airbnb/train/', 'path_data_train': 'D:/_devs/Python01/gitdev/dsa2//data/input/airbnb/train/', 'path_data_test': 'D:/_devs/Python01/gitdev/dsa2//data/input/airbnb/test/', 'path_train_output': 'D:/_devs/Python01/gitdev/dsa2//data/output/airbnb/airbnb_lightgbm/', 'path_train_model': 'D:/_devs/Python01/gitdev/dsa2//data/output/airbnb/airbnb_lightgbm/model/', 'path_features_store': 'D:/_devs/Python01/gitdev/dsa2//data/output/airbnb/airbnb_lightgbm/features_store/', 'path_pipeline': 'D:/_devs/Python01/gitdev/dsa2//data/output/airbnb/airbnb_lightgbm/pipeline/', 'path_pred_data': 'D:/_devs/Python01/gitdev/dsa2//data/input/airbnb/test/', 'path_pred_pipeline': 'D:/_devs/Python01/gitdev/dsa2//data/output/airbnb/airbnb_lightgbm/pipeline/', 'path_pred_model': 'D:/_devs/Python01/gitdev/dsa2//data/output/airbnb/airbnb_lightgbm/model/', 'path_pred_output': 'D:/_devs/Python01/gitdev/dsa2//data/output/airbnb/pred_airbnb_lightgbm/', 'n_sample': 5000}},) 
  ('D:/_devs/Python01/gitdev/dsa2//data/output/airbnb/airbnb_lightgbm/',) 
  ('#### load input column family  ####################################################',) 
  ({'coly': 'price', 'colid': 'id', 'colcat': ['cancellation_policy', 'host_response_rate', 'host_response_time'], 'colnum': ['review_scores_communication', 'review_scores_location', 'review_scores_rating'], 'coltext': ['house_rules', 'neighborhood_overview', 'notes', 'street'], 'coldate': ['calendar_last_scraped', 'first_review', 'host_since'], 'colcross': ['review_scores_communication', 'review_scores_location', 'cancellation_policy', 'host_response_rate']},) 
  ('#### Preprocess  #################################################################',) 

  ({'coly': 'price', 'colid': 'id', 'colcat': ['cancellation_policy', 'host_response_rate', 'host_response_time'], 'colnum': ['review_scores_communication', 'review_scores_location', 'review_scores_rating'], 'coltext': ['house_rules', 'neighborhood_overview', 'notes', 'street'], 'coldate': ['calendar_last_scraped', 'first_review', 'host_since'], 'colcross': ['review_scores_communication', 'review_scores_location', 'cancellation_policy', 'host_response_rate']},) 

  ('D:/_devs/Python01/gitdev/dsa2//data/output/airbnb/airbnb_lightgbm/pipeline/',) 

  ('D:/_devs/Python01/gitdev/dsa2//data/output/airbnb/airbnb_lightgbm/pipeline//colid.pkl',) 

  ('loading', 'id', 'D:/_devs/Python01/gitdev/dsa2//data/input/airbnb/train//features.zip') 
['D:/_devs/Python01/gitdev/dsa2//data/input/airbnb/train\\features.parquet']

  ('dfX_raw',                                                0  ...                                  361
id                                         21869  ...                               265408
listing_url   https://www.airbnb.com/rooms/21869  ...  https://www.airbnb.com/rooms/265408
scrape_id                         20181107122246  ...                       20181107122246
last_scraped                          2018-11-07  ...                           2018-11-07

[4 rows x 362 columns]) 

  ('dfy',        id  price
0   21869   70.0
1  151249   81.0
2   29279  130.0
3   38296   80.0
4  342637   65.0) 

  ('#####  coly  ###########################################################################',) 

  ('D:\\_devs\\Python01\\gitdev\\dsa2',) 
D:/_devs/Python01/gitdev/dsa2/
----------df----------
                                 listing_url  ...  price
id                                           ...       
21869    https://www.airbnb.com/rooms/21869  ...   70.0
151249  https://www.airbnb.com/rooms/151249  ...   81.0
29279    https://www.airbnb.com/rooms/29279  ...  130.0
38296    https://www.airbnb.com/rooms/38296  ...   80.0
342637  https://www.airbnb.com/rooms/342637  ...   65.0
...                                     ...  ...    ...
242927  https://www.airbnb.com/rooms/242927  ...   95.0
229075  https://www.airbnb.com/rooms/229075  ...   75.0
189288  https://www.airbnb.com/rooms/189288  ...  100.0
265955  https://www.airbnb.com/rooms/265955  ...   55.0
265408  https://www.airbnb.com/rooms/265408  ...    9.0

[362 rows x 95 columns]
----------df[coly]------------ id
21869      70.0
151249     81.0
29279     130.0
38296      80.0
342637     65.0
          ...  
242927     95.0
229075     75.0
189288    100.0
265955     55.0
265408      9.0
Name: price, Length: 362, dtype: float32

  ('y_norm_fun preprocess_pars',) 
----------df----------
                                 listing_url  ...  price
id                                           ...       
21869    https://www.airbnb.com/rooms/21869  ...   70.0
151249  https://www.airbnb.com/rooms/151249  ...   81.0
29279    https://www.airbnb.com/rooms/29279  ...  130.0
38296    https://www.airbnb.com/rooms/38296  ...   80.0
342637  https://www.airbnb.com/rooms/342637  ...   65.0
...                                     ...  ...    ...
242927  https://www.airbnb.com/rooms/242927  ...   95.0
229075  https://www.airbnb.com/rooms/229075  ...   75.0
189288  https://www.airbnb.com/rooms/189288  ...  100.0
265955  https://www.airbnb.com/rooms/265955  ...   55.0
265408  https://www.airbnb.com/rooms/265408  ...    9.0

[362 rows x 95 columns]

  ('D:/_devs/Python01/gitdev/dsa2//data/output/airbnb/airbnb_lightgbm/features_store//coly/features.parquet',) 

  (        price
id           
21869    70.0
151249   81.0
29279   130.0
38296    80.0
342637   65.0
...       ...
242927   95.0
229075   75.0
189288  100.0
265955   55.0
265408    9.0

[362 rows x 1 columns], ['price']) 

  ('D:/_devs/Python01/gitdev/dsa2//data/output/airbnb/airbnb_lightgbm/pipeline//coly.pkl',) 

  ('###################', {'uri': 'source/preprocessors.py::pd_colnum_bin', 'pars': {}, 'cols_family': 'colnum', 'cols_out': 'colnum_bin', 'type': ''}, '##########################################################') 

  ('D:\\_devs\\Python01\\gitdev\\dsa2',) 
        review_scores_communication  ...  review_scores_rating
id                                   ...                      
21869                           9.0  ...                  95.0
151249                          9.0  ...                  85.0
29279                          10.0  ...                  96.0
38296                          10.0  ...                  87.0
342637                         10.0  ...                  97.0
...                             ...  ...                   ...
242927                         10.0  ...                  80.0
229075                         10.0  ...                  97.0
189288                         10.0  ...                  94.0
265955                         10.0  ...                  98.0
265408                         10.0  ...                  92.0

[362 rows x 3 columns]

  (None,) 

  ('### colnum Map numerics to Category bin  ###########################################',) 
review_scores_communication
                                review_scores_communication                 
                                                        min size   max  mean
review_scores_communication_bin                                             
-1                                                      NaN   15   NaN   NaN
 0                                                      2.0    1   2.0   2.0
 2                                                      4.0    1   4.0   4.0
 4                                                      6.0    1   6.0   6.0
 6                                                      7.0    1   7.0   7.0
 7                                                      8.0   10   8.0   8.0
 8                                                      9.0   91   9.0   9.0
 9                                                     10.0  242  10.0  10.0
review_scores_location
                           review_scores_location                 
                                              min size   max  mean
review_scores_location_bin                                        
-1                                            NaN   15   NaN   NaN
 0                                            6.0    2   6.0   6.0
 2                                            7.0    2   7.0   7.0
 4                                            8.0   12   8.0   8.0
 7                                            9.0  125   9.0   9.0
 9                                           10.0  206  10.0  10.0
review_scores_rating
                         review_scores_rating                       
                                          min size    max       mean
review_scores_rating_bin                                            
-1                                        NaN   15    NaN        NaN
 0                                       73.0    2   75.0  74.000000
 1                                       76.0    2   77.0  76.500000
 2                                       80.0    9   81.0  80.111115
 3                                       82.0    5   83.0  82.800003
 4                                       84.0   11   86.0  84.818184
 5                                       87.0   35   89.0  88.142860
 6                                       90.0   27   91.0  90.518517
 7                                       92.0   83   94.0  93.204819
 8                                       95.0   86   97.0  96.116280
 9                                       98.0   87  100.0  99.160919

  (OrderedDict([('review_scores_communication', [1.9999, 2.8, 3.6, 4.4, 5.2, 6.0, 6.800000000000001, 7.6000000000000005, 8.4, 9.2, 10.0]), ('review_scores_location', [5.9999, 6.4, 6.8, 7.2, 7.6, 8.0, 8.4, 8.8, 9.2, 9.6, 10.0]), ('review_scores_rating', [72.9999, 75.7, 78.4, 81.1, 83.8, 86.5, 89.2, 91.9, 94.6, 97.3, 100.0])]),) 

  (['review_scores_communication_bin', 'review_scores_location_bin', 'review_scores_rating_bin'],) 

  ('D:/_devs/Python01/gitdev/dsa2//data/output/airbnb/airbnb_lightgbm/pipeline//colnum_binmap.pkl',) 

  ('D:/_devs/Python01/gitdev/dsa2//data/output/airbnb/airbnb_lightgbm/pipeline//colnum_bin.pkl',) 

  ('D:/_devs/Python01/gitdev/dsa2//data/output/airbnb/airbnb_lightgbm/features_store//colnum/features.parquet',) 

  (        review_scores_communication  ...  review_scores_rating_bin
id                                   ...                          
21869                           9.0  ...                         8
151249                          9.0  ...                         4
29279                          10.0  ...                         8
38296                          10.0  ...                         5
342637                         10.0  ...                         8
...                             ...  ...                       ...
242927                         10.0  ...                         2
229075                         10.0  ...                         8
189288                         10.0  ...                         7
265955                         10.0  ...                         9
265408                         10.0  ...                         7

[362 rows x 6 columns], ['review_scores_communication', 'review_scores_location', 'review_scores_rating', 'review_scores_communication_bin', 'review_scores_location_bin', 'review_scores_rating_bin']) 

  ('D:/_devs/Python01/gitdev/dsa2//data/output/airbnb/airbnb_lightgbm/features_store//colnum_bin/features.parquet',) 

  (        review_scores_communication_bin  ...  review_scores_rating_bin
id                                       ...                          
21869                                 8  ...                         8
151249                                8  ...                         4
29279                                 9  ...                         8
38296                                 9  ...                         5
342637                                9  ...                         8
...                                 ...  ...                       ...
242927                                9  ...                         2
229075                                9  ...                         8
189288                                9  ...                         7
265955                                9  ...                         9
265408                                9  ...                         7

[362 rows x 3 columns], ['review_scores_communication_bin', 'review_scores_location_bin', 'review_scores_rating_bin']) 

  ('###################', {'uri': 'source/preprocessors.py::pd_colnum_binto_onehot', 'pars': {}, 'cols_family': 'colnum_bin', 'cols_out': 'colnum_onehot', 'type': ''}, '##########################################################') 

  ('D:\\_devs\\Python01\\gitdev\\dsa2',) 
        review_scores_communication_bin  ...  review_scores_rating_bin
id                                       ...                          
21869                                 8  ...                         8
151249                                8  ...                         4
29279                                 9  ...                         8
38296                                 9  ...                         5
342637                                9  ...                         8
...                                 ...  ...                       ...
242927                                9  ...                         2
229075                                9  ...                         8
189288                                9  ...                         7
265955                                9  ...                         9
265408                                9  ...                         7

[362 rows x 3 columns]

  ('###### colnum bin to One Hot  #################################################',) 
review_scores_communication_bin 8 (362, 3)
review_scores_location_bin 6 (362, 10)
review_scores_rating_bin 11 (362, 15)

  (['review_scores_communication_bin_-1', 'review_scores_communication_bin_0', 'review_scores_communication_bin_2', 'review_scores_communication_bin_4', 'review_scores_communication_bin_6', 'review_scores_communication_bin_7', 'review_scores_communication_bin_8', 'review_scores_communication_bin_9', 'review_scores_location_bin_-1', 'review_scores_location_bin_0', 'review_scores_location_bin_2', 'review_scores_location_bin_4', 'review_scores_location_bin_7', 'review_scores_location_bin_9', 'review_scores_rating_bin_-1', 'review_scores_rating_bin_0', 'review_scores_rating_bin_1', 'review_scores_rating_bin_2', 'review_scores_rating_bin_3', 'review_scores_rating_bin_4', 'review_scores_rating_bin_5', 'review_scores_rating_bin_6', 'review_scores_rating_bin_7', 'review_scores_rating_bin_8', 'review_scores_rating_bin_9'],) 

  ('D:/_devs/Python01/gitdev/dsa2//data/output/airbnb/airbnb_lightgbm/pipeline//colnum_onehot.pkl',) 

  ('D:/_devs/Python01/gitdev/dsa2//data/output/airbnb/airbnb_lightgbm/features_store//colnum_onehot/features.parquet',) 

  (        review_scores_communication_bin_-1  ...  review_scores_rating_bin_9
id                                          ...                            
21869                                    0  ...                           0
151249                                   0  ...                           0
29279                                    0  ...                           0
38296                                    0  ...                           0
342637                                   0  ...                           0
...                                    ...  ...                         ...
242927                                   0  ...                           0
229075                                   0  ...                           0
189288                                   0  ...                           0
265955                                   0  ...                           1
265408                                   0  ...                           0

[362 rows x 25 columns], ['review_scores_communication_bin_-1', 'review_scores_communication_bin_0', 'review_scores_communication_bin_2', 'review_scores_communication_bin_4', 'review_scores_communication_bin_6', 'review_scores_communication_bin_7', 'review_scores_communication_bin_8', 'review_scores_communication_bin_9', 'review_scores_location_bin_-1', 'review_scores_location_bin_0', 'review_scores_location_bin_2', 'review_scores_location_bin_4', 'review_scores_location_bin_7', 'review_scores_location_bin_9', 'review_scores_rating_bin_-1', 'review_scores_rating_bin_0', 'review_scores_rating_bin_1', 'review_scores_rating_bin_2', 'review_scores_rating_bin_3', 'review_scores_rating_bin_4', 'review_scores_rating_bin_5', 'review_scores_rating_bin_6', 'review_scores_rating_bin_7', 'review_scores_rating_bin_8', 'review_scores_rating_bin_9']) 

  ('###################', {'uri': 'source/preprocessors.py::pd_colcat_bin', 'pars': {}, 'cols_family': 'colcat', 'cols_out': 'colcat_bin', 'type': ''}, '##########################################################') 

  ('D:\\_devs\\Python01\\gitdev\\dsa2',) 
                cancellation_policy host_response_rate  host_response_time
id                                                                        
21869   strict_14_with_grace_period               100%  within a few hours
151249  strict_14_with_grace_period               100%        within a day
29279   strict_14_with_grace_period               100%  within a few hours
38296                      flexible                50%        within a day
342637                     moderate                20%  a few days or more
...                             ...                ...                 ...
242927  strict_14_with_grace_period               None                None
229075                     moderate               100%  within a few hours
189288  strict_14_with_grace_period               None                None
265955  strict_14_with_grace_period               100%      within an hour
265408                     moderate               None                None

[362 rows x 3 columns]

  ('#### Colcat to integer encoding ',) 

  (cancellation_policy    object
host_response_rate     object
host_response_time     object
dtype: object, {'cat_map': {'cancellation_policy': {'flexible': 0, 'moderate': 1, 'strict_14_with_grace_period': 2}, 'host_response_rate': {'0%': 0, '100%': 1, '20%': 2, '30%': 3, '43%': 4, '50%': 5, '60%': 6, '64%': 7, '67%': 8, '68%': 9, '74%': 10, '75%': 11, '80%': 12, '86%': 13, '88%': 14, '90%': 15, '95%': 16, '96%': 17, '97%': 18}, 'host_response_time': {'a few days or more': 0, 'within a day': 1, 'within a few hours': 2, 'within an hour': 3}}, 'cat_map_inverse': {'cancellation_policy': {0: 'flexible', 1: 'moderate', 2: 'strict_14_with_grace_period'}, 'host_response_rate': {0: '0%', 1: '100%', 2: '20%', 3: '30%', 4: '43%', 5: '50%', 6: '60%', 7: '64%', 8: '67%', 9: '68%', 10: '74%', 11: '75%', 12: '80%', 13: '86%', 14: '88%', 15: '90%', 16: '95%', 17: '96%', 18: '97%'}, 'host_response_time': {0: 'a few days or more', 1: 'within a day', 2: 'within a few hours', 3: 'within an hour'}}}) 

  ('D:/_devs/Python01/gitdev/dsa2//data/output/airbnb/airbnb_lightgbm/pipeline//colcat_bin_map.pkl',) 

  ('D:/_devs/Python01/gitdev/dsa2//data/output/airbnb/airbnb_lightgbm/pipeline//colcat_bin.pkl',) 

  ('D:/_devs/Python01/gitdev/dsa2//data/output/airbnb/airbnb_lightgbm/features_store//colcat/features.parquet',) 

  (                cancellation_policy  ... host_response_time_int
id                                   ...                       
21869   strict_14_with_grace_period  ...                      0
151249  strict_14_with_grace_period  ...                      1
29279   strict_14_with_grace_period  ...                      0
38296                      flexible  ...                      1
342637                     moderate  ...                      2
...                             ...  ...                    ...
242927  strict_14_with_grace_period  ...                     -1
229075                     moderate  ...                      0
189288  strict_14_with_grace_period  ...                     -1
265955  strict_14_with_grace_period  ...                      3
265408                     moderate  ...                     -1

[362 rows x 6 columns], ['cancellation_policy', 'host_response_rate', 'host_response_time', 'cancellation_policy_int', 'host_response_rate_int', 'host_response_time_int']) 

  ('D:/_devs/Python01/gitdev/dsa2//data/output/airbnb/airbnb_lightgbm/features_store//colcat_bin/features.parquet',) 

  (        cancellation_policy_int  host_response_rate_int  host_response_time_int
id                                                                             
21869                         0                       0                       0
151249                        0                       0                       1
29279                         0                       0                       0
38296                         1                       1                       1
342637                        2                       2                       2
...                         ...                     ...                     ...
242927                        0                      -1                      -1
229075                        2                       0                       0
189288                        0                      -1                      -1
265955                        0                       0                       3
265408                        2                      -1                      -1

[362 rows x 3 columns], ['cancellation_policy_int', 'host_response_rate_int', 'host_response_time_int']) 

  ('###################', {'uri': 'source/preprocessors.py::pd_colcat_to_onehot', 'pars': {}, 'cols_family': 'colcat_bin', 'cols_out': 'colcat_onehot', 'type': ''}, '##########################################################') 

  ('D:\\_devs\\Python01\\gitdev\\dsa2',) 
        cancellation_policy_int  host_response_rate_int  host_response_time_int
id                                                                             
21869                         0                       0                       0
151249                        0                       0                       1
29279                         0                       0                       0
38296                         1                       1                       1
342637                        2                       2                       2
...                         ...                     ...                     ...
242927                        0                      -1                      -1
229075                        2                       0                       0
189288                        0                      -1                      -1
265955                        0                       0                       3
265408                        2                      -1                      -1

[362 rows x 3 columns]

  ('#### colcat to onehot',) 
cancellation_policy_int 3 (362, 3)
host_response_rate_int 20 (362, 5)
host_response_time_int 5 (362, 24)

  (        cancellation_policy_int_0  ...  host_response_time_int_3
id                                 ...                          
21869                           1  ...                         0
151249                          1  ...                         0
29279                           1  ...                         0
38296                           0  ...                         0
342637                          0  ...                         0

[5 rows x 28 columns],) 

  ('D:/_devs/Python01/gitdev/dsa2//data/output/airbnb/airbnb_lightgbm/pipeline//colcat_onehot.pkl',) 

  ('D:/_devs/Python01/gitdev/dsa2//data/output/airbnb/airbnb_lightgbm/pipeline//colcat.pkl',) 
ok ------------

  ('D:/_devs/Python01/gitdev/dsa2//data/output/airbnb/airbnb_lightgbm/features_store//colcat_onehot/features.parquet',) 

  (        cancellation_policy_int_0  ...  host_response_time_int_3
id                                 ...                          
21869                           1  ...                         0
151249                          1  ...                         0
29279                           1  ...                         0
38296                           0  ...                         0
342637                          0  ...                         0
...                           ...  ...                       ...
242927                          1  ...                         0
229075                          0  ...                         0
189288                          1  ...                         0
265955                          1  ...                         1
265408                          0  ...                         0

[362 rows x 28 columns], ['cancellation_policy_int_0', 'cancellation_policy_int_1', 'cancellation_policy_int_2', 'host_response_rate_int_-1', 'host_response_rate_int_0', 'host_response_rate_int_1', 'host_response_rate_int_2', 'host_response_rate_int_3', 'host_response_rate_int_4', 'host_response_rate_int_5', 'host_response_rate_int_6', 'host_response_rate_int_7', 'host_response_rate_int_8', 'host_response_rate_int_9', 'host_response_rate_int_10', 'host_response_rate_int_11', 'host_response_rate_int_12', 'host_response_rate_int_13', 'host_response_rate_int_14', 'host_response_rate_int_15', 'host_response_rate_int_16', 'host_response_rate_int_17', 'host_response_rate_int_18', 'host_response_time_int_-1', 'host_response_time_int_0', 'host_response_time_int_1', 'host_response_time_int_2', 'host_response_time_int_3']) 

  ('###################', {'uri': 'source/preprocessors.py::pd_coltext', 'pars': {}, 'cols_family': 'coltext', 'cols_out': 'coltext_svd', 'type': ''}, '##########################################################') 

  ('D:\\_devs\\Python01\\gitdev\\dsa2',) 
                                              house_rules  ...                   street
id                                                         ...                         
21869   1. No noise after 10 pm PLEASE. 2. Please do n...  ...  Berlin, Berlin, Germany
151249                              respect airbnb rules.  ...  Berlin, Berlin, Germany
29279   It is a non-smoking apartment Check-in time: f...  ...  Berlin, Berlin, Germany
38296                                                None  ...  Berlin, Berlin, Germany
342637                                               None  ...  Berlin, Berlin, Germany
...                                                   ...  ...                      ...
242927                                               None  ...  Berlin, Berlin, Germany
229075                                               None  ...  Berlin, Berlin, Germany
189288  Bitte beachten Sie:  * Zu Messezeiten und in d...  ...  Berlin, Berlin, Germany
265955  Please respect the neighbours and keep the noi...  ...  Berlin, Berlin, Germany
265408                                               None  ...  Berlin, Berlin, Germany

[362 rows x 4 columns]
os.getcwd D:\_devs\Python01\gitdev\dsa2
evolutionary_search None No module named 'evolutionary_search'
imported <module 'lightgbm' from 'D:\\_devs\\Python01\\ana3\\envs\\py36\\lib\\site-packages\\lightgbm\\__init__.py'>
imported <module 'kmodes' from 'D:\\_devs\\Python01\\ana3\\envs\\py36\\lib\\site-packages\\kmodes\\__init__.py'>
imported <module 'catboost' from 'D:\\_devs\\Python01\\ana3\\envs\\py36\\lib\\site-packages\\catboost\\__init__.py'>
imported <module 'tpot' from 'D:\\_devs\\Python01\\ana3\\envs\\py36\\lib\\site-packages\\tpot\\__init__.py'>
os.getcwd D:\_devs\Python01\gitdev\dsa2
['', ' ', '!', '"', '#', '$', '%', '&', "'", '(', ')', '*', '+', ',', '-', '.', '/', ':', ';', '<', '=', '>', '?', '@', '[', '\\', ']', '^', '_', '`', 'a', 'about', 'above', 'after', 'again', 'against', 'ain', 'all', 'am', 'an', 'and', 'any', 'are', 'aren', "aren't", 'as', 'at', 'be', 'because', 'been', 'before', 'being', 'below', 'between', 'both', 'but', 'by', 'can', 'couldn', "couldn't", 'd', 'did', 'didn', "didn't", 'do', 'does', 'doesn', "doesn't", 'doing', 'don', "don't", 'down', 'during', 'each', 'few', 'for', 'from', 'further', 'had', 'hadn', "hadn't", 'has', 'hasn', "hasn't", 'have', 'haven', "haven't", 'having', 'he', 'her', 'here', 'hers', 'herself', 'him', 'himself', 'his', 'how', 'i', 'if', 'in', 'into', 'is', 'isn', "isn't", 'it', "it's", 'its', 'itself', 'just', 'll', 'm', 'ma', 'me', 'mightn', "mightn't", 'more', 'most', 'mustn', "mustn't", 'my', 'myself', 'needn', "needn't", 'no', 'nor', 'not', 'now', 'o', 'of', 'off', 'on', 'once', 'only', 'or', 'other', 'our', 'ours', 'ourselves', 'out', 'over', 'own', 're', 's', 'same', 'shan', "shan't", 'she', "she's", 'should', "should've", 'shouldn', "shouldn't", 'so', 'some', 'such', 't', 'than', 'that', "that'll", 'the', 'their', 'theirs', 'them', 'themselves', 'then', 'there', 'these', 'they', 'this', 'those', 'through', 'to', 'too', 'under', 'until', 'up', 've', 'very', 'was', 'wasn', "wasn't", 'we', 'were', 'weren', "weren't", 'what', 'when', 'where', 'which', 'while', 'who', 'whom', 'why', 'will', 'with', 'won', "won't", 'wouldn', "wouldn't", 'y', 'you', "you'd", "you'll", "you're", "you've", 'your', 'yours', 'yourself', 'yourselves', '{', '|', '}', '~', '€']

  (                                              house_rules  ...                   street
id                                                         ...                         
21869   1. No noise after 10 pm PLEASE. 2. Please do n...  ...  Berlin, Berlin, Germany
151249                              respect airbnb rules.  ...  Berlin, Berlin, Germany
29279   It is a non-smoking apartment Check-in time: f...  ...  Berlin, Berlin, Germany
38296                                                      ...  Berlin, Berlin, Germany
342637                                                     ...  Berlin, Berlin, Germany
...                                                   ...  ...                      ...
242927                                                     ...  Berlin, Berlin, Germany
229075                                                     ...  Berlin, Berlin, Germany
189288  Bitte beachten Sie:  * Zu Messezeiten und in d...  ...  Berlin, Berlin, Germany
265955  Please respect the neighbours and keep the noi...  ...  Berlin, Berlin, Germany
265408                                                     ...  Berlin, Berlin, Germany

[362 rows x 4 columns],) 

  (['house_rules', 'neighborhood_overview', 'notes', 'street'],) 
----col-----
 house_rules

  (                 word   freq
3                 the  771.0
74                     372.0
2                 and  355.0
50                 in  337.0
35                 to  302.0
...               ...    ...
2341  Mitbewohner/in,    1.0
2342            werde    1.0
2343           er/sie    1.0
2344           Nächte    1.0
4605         minimum.    1.0

[4606 rows x 2 columns],) 

  ({'please': 27, 'und': 38, 'none': 25, 'no': 24, 'apartment': 1, 'die': 8, 'der': 7, 'the': 36, 'ist': 17, 'use': 39, 'für': 11, 'zu': 44, 'sie': 32, 'smoking': 33, 'bitte': 3, 'nicht': 23, 'auf': 2, 'allowed': 0, 'we': 41, 'wohnung': 42, 'illegal': 15, 'leave': 19, 'von': 40, 'guests': 12, 'house': 13, 'shoes': 30, 'you': 43, 'take': 35, 'make': 21, 'keine': 18, 'sich': 31, 'das': 5, 'flat': 10, 'uhr': 37, 'if': 14, 'respect': 28, 'like': 20, 'nach': 22, 'parties': 26, 'dem': 6, 'clean': 4, 'stay': 34, 'es': 9, 'im': 16, 'room': 29},) 
----col-----
 neighborhood_overview

  (               word   freq
13              the  596.0
38              and  390.0
4                of  289.0
0                is  266.0
82               in  242.0
...             ...    ...
1698         music!    1.0
1699      recommend    1.0
1700  characterized    1.0
1703          vinyl    1.0
3450       bridges)    1.0

[3451 rows x 2 columns],) 

  ({'none': 34, 'the': 49, 'und': 51, 'berlin': 6, 'der': 15, 'apartment': 1, 'area': 2, 'in': 22, 'ist': 23, 'restaurants': 41, 'many': 26, 'mit': 30, 'prenzlauer': 38, 'minutes': 29, 'street': 47, 'also': 0, 'bars': 4, 'die': 16, 'one': 35, 'shops': 43, 'famous': 19, 'walking': 53, 'around': 3, 'within': 55, 'market': 27, 'walk': 52, 'located': 25, 'sind': 45, 'dem': 13, 'nice': 33, 'well': 54, 'quiet': 40, 'zu': 56, 'there': 50, 'berg': 5, 'cafes': 8, 'im': 21, 'find': 20, 'ein': 18, 'meters': 28, 'central': 10, 'sich': 44, 'neighborhood': 31, 'it': 24, 'neukölln': 32, 'de': 12, 'small': 46, 'close': 11, 'public': 39, 'district': 17, 'den': 14, 'right': 42, 'cafés': 9, 'best': 7, 'streets': 48, 'popular': 37, 'part': 36},) 
----col-----
 notes

  (              word   freq
13             the  235.0
0             None  192.0
70              to  142.0
26              in  120.0
1              and  113.0
...            ...    ...
1139         Hinzu    1.0
1138    berufliche    1.0
1137  Umsatzsteuer    1.0
1136    frühzeitig    1.0
2342      Späteste    1.0

[2343 rows x 2 columns],) 

  ({'none': 27, 'berlin': 7, 'der': 11, 'und': 44, 'the': 39, 'die': 12, 'apartment': 4, 'von': 47, 'eine': 13, 'please': 32, 'arrival': 5, 'sie': 34, 'city': 10, 'free': 17, 'bis': 8, 'if': 21, 'for': 16, 'tax': 38, 'ist': 23, 'need': 25, 'upon': 45, 'this': 41, 'nicht': 26, 'paid': 29, 'we': 48, 'im': 22, 'stays': 37, 'sind': 36, 'uhr': 43, 'must': 24, 'price': 33, 'pay': 31, 'fee': 15, 'use': 46, 'airbnb': 2, 'hidden': 20, 'für': 18, 'parking': 30, '2014': 1, 'extra': 14, 'business': 9, 'guests': 19, 'number': 28, 'also': 3, 'since': 35, 'there': 40, 'two': 42, '15': 0, 'bei': 6},) 
----col-----
 street

  (          word   freq
0      Berlin,  721.0
1      Germany  362.0
2  Schöneberg,    1.0,) 

  ({'berlin': 0, 'germany': 1, 'schöneberg': 2},) 

  ('D:/_devs/Python01/gitdev/dsa2//data/output/airbnb/airbnb_lightgbm/pipeline//word_tokeep_dict_all.pkl',) 

  ('D:/_devs/Python01/gitdev/dsa2//data/output/airbnb/airbnb_lightgbm/features_store//coltext_svd/features.parquet',) 

  (        house_rules_svd_0  house_rules_svd_1  ...  street_svd_0  street_svd_1
id                                            ...                            
21869            0.645356          -0.089615  ...      0.999997      -0.00235
151249           0.115496          -0.018125  ...      0.999997      -0.00235
29279            0.473019          -0.044449  ...      0.999997      -0.00235
38296            0.000000           0.000000  ...      0.999997      -0.00235
342637           0.000000           0.000000  ...      0.999997      -0.00235
...                   ...                ...  ...           ...           ...
242927           0.000000           0.000000  ...      0.999997      -0.00235
229075           0.000000           0.000000  ...      0.999997      -0.00235
189288           0.099456           0.796835  ...      0.999997      -0.00235
265955           0.662207          -0.096909  ...      0.999997      -0.00235
265408           0.000000           0.000000  ...      0.999997      -0.00235

[362 rows x 8 columns], ['house_rules_svd_0', 'house_rules_svd_1', 'neighborhood_overview_svd_0', 'neighborhood_overview_svd_1', 'notes_svd_0', 'notes_svd_1', 'street_svd_0', 'street_svd_1']) 

  ('###################', {'uri': 'source/preprocessors.py::pd_coldate', 'pars': {}, 'cols_family': 'coldate', 'cols_out': 'coldate', 'type': ''}, '##########################################################') 

  ('D:\\_devs\\Python01\\gitdev\\dsa2',) 
       calendar_last_scraped first_review  host_since
id                                                   
21869             2018-11-07   2010-09-23  2009-12-20
151249            2018-11-07   2015-09-22  2011-06-21
29279             2018-11-07   2010-09-29  2009-11-14
38296             2018-11-07   2010-07-28  2010-07-12
342637            2018-11-07   2012-04-07  2012-02-12
...                      ...          ...         ...
242927            2018-11-07   2018-05-08  2011-10-11
229075            2018-11-07   2011-10-25  2011-09-22
189288            2018-11-07   2012-04-15  2011-08-02
265955            2018-11-07   2012-07-07  2011-11-11
265408            2018-11-07   2014-06-13  2011-11-10

[362 rows x 3 columns]

  ('##### Coldate processing   #############################################################',) 

  ('D:/_devs/Python01/gitdev/dsa2//data/output/airbnb/airbnb_lightgbm/features_store//dfdate/features.parquet',) 

  (       calendar_last_scraped  ... host_since_day
id                            ...               
21869             2018-11-07  ...             20
151249            2018-11-07  ...             21
29279             2018-11-07  ...             14
38296             2018-11-07  ...             12
342637            2018-11-07  ...             12
...                      ...  ...            ...
242927            2018-11-07  ...             11
229075            2018-11-07  ...             22
189288            2018-11-07  ...              2
265955            2018-11-07  ...             11
265408            2018-11-07  ...             10

[362 rows x 15 columns], ['calendar_last_scraped', 'calendar_last_scraped_dt', 'calendar_last_scraped_year', 'calendar_last_scraped_month', 'calendar_last_scraped_day', 'first_review', 'first_review_dt', 'first_review_year', 'first_review_month', 'first_review_day', 'host_since', 'host_since_dt', 'host_since_year', 'host_since_month', 'host_since_day']) 

  ('###################', {'uri': 'source/preprocessors.py::pd_colcross', 'pars': {}, 'cols_family': 'colcross', 'cols_out': 'colcross_pair_onehot', 'type': 'cross'}, '##########################################################') 

  ('D:\\_devs\\Python01\\gitdev\\dsa2',) 
        review_scores_communication  ...  host_response_rate
id                                   ...                    
21869                           9.0  ...                100%
151249                          9.0  ...                100%
29279                          10.0  ...                100%
38296                          10.0  ...                 50%
342637                         10.0  ...                 20%
...                             ...  ...                 ...
242927                         10.0  ...                None
229075                         10.0  ...                100%
189288                         10.0  ...                None
265955                         10.0  ...                100%
265408                         10.0  ...                None

[362 rows x 4 columns]

  ('#####  Cross Features From OneHot Features   ######################################',) 

  (id                                                  21869   151249
cancellation_policy_int_0-host_response_rate_in...       0       0
cancellation_policy_int_0-host_response_rate_int_0       1       1
cancellation_policy_int_0-review_scores_communi...       1       1
cancellation_policy_int_0-review_scores_communi...       0       0
cancellation_policy_int_0-review_scores_locatio...       1       0
cancellation_policy_int_0-review_scores_locatio...       0       1
cancellation_policy_int_1-host_response_rate_in...       0       0
cancellation_policy_int_1-host_response_rate_int_0       0       0
cancellation_policy_int_1-review_scores_communi...       0       0
cancellation_policy_int_1-review_scores_communi...       0       0
cancellation_policy_int_1-review_scores_locatio...       0       0
cancellation_policy_int_1-review_scores_locatio...       0       0
cancellation_policy_int_2-host_response_rate_in...       0       0
cancellation_policy_int_2-host_response_rate_int_0       0       0
cancellation_policy_int_2-review_scores_communi...       0       0
cancellation_policy_int_2-review_scores_communi...       0       0
cancellation_policy_int_2-review_scores_locatio...       0       0
cancellation_policy_int_2-review_scores_locatio...       0       0
host_response_rate_int_-1-review_scores_communi...       0       0
host_response_rate_int_-1-review_scores_communi...       0       0
host_response_rate_int_-1-review_scores_communi...       0       0
host_response_rate_int_-1-review_scores_locatio...       0       0
host_response_rate_int_-1-review_scores_locatio...       0       0
host_response_rate_int_-1-review_scores_locatio...       0       0
host_response_rate_int_0-review_scores_communic...       1       1
host_response_rate_int_0-review_scores_communic...       0       0
host_response_rate_int_0-review_scores_location...       1       0
host_response_rate_int_0-review_scores_location...       0       1
review_scores_communication_bin_-1-review_score...       0       0
review_scores_communication_bin_8-review_scores...       1       0
review_scores_communication_bin_8-review_scores...       0       1
review_scores_communication_bin_9-review_scores...       0       0
review_scores_communication_bin_9-review_scores...       0       0,) 

  ('D:/_devs/Python01/gitdev/dsa2//data/output/airbnb/airbnb_lightgbm/pipeline//colcross_single_onehot_select.pkl',) 

  ('D:/_devs/Python01/gitdev/dsa2//data/output/airbnb/airbnb_lightgbm/pipeline//colcross_pair.pkl',) 

  ('D:/_devs/Python01/gitdev/dsa2//data/output/airbnb/airbnb_lightgbm/features_store//colcross_pair/features.parquet',) 

  (        cancellation_policy_int_0-host_response_rate_int_-1  ...  review_scores_communication_bin_9-review_scores_location_bin_9
id                                                           ...                                                                
21869                                                   0    ...                                                  0             
151249                                                  0    ...                                                  0             
29279                                                   0    ...                                                  1             
38296                                                   0    ...                                                  1             
342637                                                  0    ...                                                  1             
...                                                   ...    ...                                                ...             
242927                                                  1    ...                                                  1             
229075                                                  0    ...                                                  1             
189288                                                  1    ...                                                  0             
265955                                                  0    ...                                                  0             
265408                                                  0    ...                                                  0             

[362 rows x 33 columns], ['cancellation_policy_int_0-host_response_rate_int_-1', 'cancellation_policy_int_0-host_response_rate_int_0', 'cancellation_policy_int_0-review_scores_communication_bin_8', 'cancellation_policy_int_0-review_scores_communication_bin_9', 'cancellation_policy_int_0-review_scores_location_bin_7', 'cancellation_policy_int_0-review_scores_location_bin_9', 'cancellation_policy_int_1-host_response_rate_int_-1', 'cancellation_policy_int_1-host_response_rate_int_0', 'cancellation_policy_int_1-review_scores_communication_bin_8', 'cancellation_policy_int_1-review_scores_communication_bin_9', 'cancellation_policy_int_1-review_scores_location_bin_7', 'cancellation_policy_int_1-review_scores_location_bin_9', 'cancellation_policy_int_2-host_response_rate_int_-1', 'cancellation_policy_int_2-host_response_rate_int_0', 'cancellation_policy_int_2-review_scores_communication_bin_8', 'cancellation_policy_int_2-review_scores_communication_bin_9', 'cancellation_policy_int_2-review_scores_location_bin_7', 'cancellation_policy_int_2-review_scores_location_bin_9', 'host_response_rate_int_-1-review_scores_communication_bin_-1', 'host_response_rate_int_-1-review_scores_communication_bin_8', 'host_response_rate_int_-1-review_scores_communication_bin_9', 'host_response_rate_int_-1-review_scores_location_bin_-1', 'host_response_rate_int_-1-review_scores_location_bin_7', 'host_response_rate_int_-1-review_scores_location_bin_9', 'host_response_rate_int_0-review_scores_communication_bin_8', 'host_response_rate_int_0-review_scores_communication_bin_9', 'host_response_rate_int_0-review_scores_location_bin_7', 'host_response_rate_int_0-review_scores_location_bin_9', 'review_scores_communication_bin_-1-review_scores_location_bin_-1', 'review_scores_communication_bin_8-review_scores_location_bin_7', 'review_scores_communication_bin_8-review_scores_location_bin_9', 'review_scores_communication_bin_9-review_scores_location_bin_7', 'review_scores_communication_bin_9-review_scores_location_bin_9']) 

  ('D:/_devs/Python01/gitdev/dsa2//data/output/airbnb/airbnb_lightgbm/features_store//dfX/features.parquet',) 

  (        price  ...  review_scores_communication_bin_9-review_scores_location_bin_9
id             ...                                                                
21869    70.0  ...                                                  0             
151249   81.0  ...                                                  0             
29279   130.0  ...                                                  1             
38296    80.0  ...                                                  1             
342637   65.0  ...                                                  1             
...       ...  ...                                                ...             
242927   95.0  ...                                                  1             
229075   75.0  ...                                                  1             
189288  100.0  ...                                                  0             
265955   55.0  ...                                                  0             
265408    9.0  ...                                                  0             

[362 rows x 122 columns], ['price', 'review_scores_communication', 'review_scores_location', 'review_scores_rating', 'cancellation_policy', 'host_response_rate', 'host_response_time', 'review_scores_communication_bin', 'review_scores_location_bin', 'review_scores_rating_bin', 'review_scores_communication_bin_-1', 'review_scores_communication_bin_0', 'review_scores_communication_bin_2', 'review_scores_communication_bin_4', 'review_scores_communication_bin_6', 'review_scores_communication_bin_7', 'review_scores_communication_bin_8', 'review_scores_communication_bin_9', 'review_scores_location_bin_-1', 'review_scores_location_bin_0', 'review_scores_location_bin_2', 'review_scores_location_bin_4', 'review_scores_location_bin_7', 'review_scores_location_bin_9', 'review_scores_rating_bin_-1', 'review_scores_rating_bin_0', 'review_scores_rating_bin_1', 'review_scores_rating_bin_2', 'review_scores_rating_bin_3', 'review_scores_rating_bin_4', 'review_scores_rating_bin_5', 'review_scores_rating_bin_6', 'review_scores_rating_bin_7', 'review_scores_rating_bin_8', 'review_scores_rating_bin_9', 'cancellation_policy_int', 'host_response_rate_int', 'host_response_time_int', 'cancellation_policy_int_0', 'cancellation_policy_int_1', 'cancellation_policy_int_2', 'host_response_rate_int_-1', 'host_response_rate_int_0', 'host_response_rate_int_1', 'host_response_rate_int_2', 'host_response_rate_int_3', 'host_response_rate_int_4', 'host_response_rate_int_5', 'host_response_rate_int_6', 'host_response_rate_int_7', 'host_response_rate_int_8', 'host_response_rate_int_9', 'host_response_rate_int_10', 'host_response_rate_int_11', 'host_response_rate_int_12', 'host_response_rate_int_13', 'host_response_rate_int_14', 'host_response_rate_int_15', 'host_response_rate_int_16', 'host_response_rate_int_17', 'host_response_rate_int_18', 'host_response_time_int_-1', 'host_response_time_int_0', 'host_response_time_int_1', 'host_response_time_int_2', 'host_response_time_int_3', 'house_rules_svd_0', 'house_rules_svd_1', 'neighborhood_overview_svd_0', 'neighborhood_overview_svd_1', 'notes_svd_0', 'notes_svd_1', 'street_svd_0', 'street_svd_1', 'calendar_last_scraped', 'calendar_last_scraped_dt', 'calendar_last_scraped_year', 'calendar_last_scraped_month', 'calendar_last_scraped_day', 'first_review', 'first_review_dt', 'first_review_year', 'first_review_month', 'first_review_day', 'host_since', 'host_since_dt', 'host_since_year', 'host_since_month', 'host_since_day', 'cancellation_policy_int_0-host_response_rate_int_-1', 'cancellation_policy_int_0-host_response_rate_int_0', 'cancellation_policy_int_0-review_scores_communication_bin_8', 'cancellation_policy_int_0-review_scores_communication_bin_9', 'cancellation_policy_int_0-review_scores_location_bin_7', 'cancellation_policy_int_0-review_scores_location_bin_9', 'cancellation_policy_int_1-host_response_rate_int_-1', 'cancellation_policy_int_1-host_response_rate_int_0', 'cancellation_policy_int_1-review_scores_communication_bin_8', 'cancellation_policy_int_1-review_scores_communication_bin_9', 'cancellation_policy_int_1-review_scores_location_bin_7', 'cancellation_policy_int_1-review_scores_location_bin_9', 'cancellation_policy_int_2-host_response_rate_int_-1', 'cancellation_policy_int_2-host_response_rate_int_0', 'cancellation_policy_int_2-review_scores_communication_bin_8', 'cancellation_policy_int_2-review_scores_communication_bin_9', 'cancellation_policy_int_2-review_scores_location_bin_7', 'cancellation_policy_int_2-review_scores_location_bin_9', 'host_response_rate_int_-1-review_scores_communication_bin_-1', 'host_response_rate_int_-1-review_scores_communication_bin_8', 'host_response_rate_int_-1-review_scores_communication_bin_9', 'host_response_rate_int_-1-review_scores_location_bin_-1', 'host_response_rate_int_-1-review_scores_location_bin_7', 'host_response_rate_int_-1-review_scores_location_bin_9', 'host_response_rate_int_0-review_scores_communication_bin_8', 'host_response_rate_int_0-review_scores_communication_bin_9', 'host_response_rate_int_0-review_scores_location_bin_7', 'host_response_rate_int_0-review_scores_location_bin_9', 'review_scores_communication_bin_-1-review_scores_location_bin_-1', 'review_scores_communication_bin_8-review_scores_location_bin_7', 'review_scores_communication_bin_8-review_scores_location_bin_9', 'review_scores_communication_bin_9-review_scores_location_bin_7', 'review_scores_communication_bin_9-review_scores_location_bin_9']) 

  ('D:/_devs/Python01/gitdev/dsa2//data/output/airbnb/airbnb_lightgbm/pipeline//colsX.pkl',) 

  ('D:/_devs/Python01/gitdev/dsa2//data/output/airbnb/airbnb_lightgbm/pipeline//cols_family.pkl',) 
  ('used columns', ['review_scores_communication', 'review_scores_location', 'review_scores_rating', 'review_scores_communication', 'review_scores_location', 'review_scores_rating', 'cancellation_policy_int', 'host_response_rate_int', 'host_response_time_int', 'house_rules_svd_0', 'house_rules_svd_1', 'neighborhood_overview_svd_0', 'neighborhood_overview_svd_1', 'notes_svd_0', 'notes_svd_1', 'street_svd_0', 'street_svd_1'], 'price') 
  ('##### Train model: #############################################################',) 
  ("{'model_pars': {'model_class': 'LGBMRegressor', 'model_path': '', 'model_pars': {'objective': 'huber'}, 'post_process_fun': <function airbnb_lightgbm.<locals>.post_process_fun at 0x00000255E6B6D598>, 'pre_process_pars': {'y_norm_fun': <function airbnb_lightgbm.<locals>.pre_process_fun at 0x00000255E6B90B70>, 'pipe_list': [{'uri': 'source/preprocessors.py::pd_coly', 'pars': {'path_features_store': 'D:/_devs/Python01/gitdev/dsa2//data/output/airbnb/airbnb_lightgbm/features_store/', 'path_pipeline_export': 'D:/_devs/Python01/gitdev/dsa2//data/output/airbnb/airbnb_lightgbm/pipeline/'}, 'cols_family': 'coly', 'cols_out': 'coly', 'type': 'coly'}, {'uri': 'source/preprocessors.py::pd_colnum_bin', 'pars': {'path_features_store': 'D:/_devs/Python01/gitdev/dsa2//data/output/airbnb/airbnb_lightgbm/features_store/', 'path_pipeline_export': 'D:/_devs/Python01/gitdev/dsa2//data/output/airbnb/airbnb_lightgbm/pipeline/'}, 'cols_family': 'colnum', 'cols_out': 'colnum_bin', 'type': ''}, {'uri': 'source/",) 
  ('#### Data preparation #############################################################',) 
  ((362, 122),) 
colsX ['review_scores_communication', 'review_scores_location', 'review_scores_rating', 'review_scores_communication', 'review_scores_location', 'review_scores_rating', 'cancellation_policy_int', 'host_response_rate_int', 'host_response_time_int', 'house_rules_svd_0', 'house_rules_svd_1', 'neighborhood_overview_svd_0', 'neighborhood_overview_svd_1', 'notes_svd_0', 'notes_svd_1', 'street_svd_0', 'street_svd_1']
  ('#### Model Instance ##########################################################',) 
cannot import pyod
  (<module 'models.model_sklearn' from 'D:\\_devs\\Python01\\gitdev\\dsa2\\source\\models\\model_sklearn.py'>,) 
<class 'lightgbm.sklearn.LGBMRegressor'> LGBMRegressor(objective='huber')
(217, 17) LGBMRegressor(objective='huber')
[1]	valid_0's huber: 23.8893
[2]	valid_0's huber: 23.8758
[3]	valid_0's huber: 23.8623
[4]	valid_0's huber: 23.8489
[5]	valid_0's huber: 23.8356
[6]	valid_0's huber: 23.8225
[7]	valid_0's huber: 23.8095
[8]	valid_0's huber: 23.7966
[9]	valid_0's huber: 23.7839
[10]	valid_0's huber: 23.7714
[11]	valid_0's huber: 23.759
[12]	valid_0's huber: 23.7468
[13]	valid_0's huber: 23.7352
[14]	valid_0's huber: 23.7237
[15]	valid_0's huber: 23.7125
[16]	valid_0's huber: 23.7013
[17]	valid_0's huber: 23.6903
[18]	valid_0's huber: 23.679
[19]	valid_0's huber: 23.6679
[20]	valid_0's huber: 23.6569
[21]	valid_0's huber: 23.646
[22]	valid_0's huber: 23.6353
[23]	valid_0's huber: 23.6247
[24]	valid_0's huber: 23.6143
[25]	valid_0's huber: 23.604
[26]	valid_0's huber: 23.5939
[27]	valid_0's huber: 23.5857
[28]	valid_0's huber: 23.5792
[29]	valid_0's huber: 23.5693
[30]	valid_0's huber: 23.5629
[31]	valid_0's huber: 23.555
[32]	valid_0's huber: 23.5486
[33]	valid_0's huber: 23.5409
[34]	valid_0's huber: 23.5345
[35]	valid_0's huber: 23.5257
[36]	valid_0's huber: 23.5195
[37]	valid_0's huber: 23.5119
[38]	valid_0's huber: 23.5057
[39]	valid_0's huber: 23.4971
[40]	valid_0's huber: 23.491
[41]	valid_0's huber: 23.4826
[42]	valid_0's huber: 23.4766
[43]	valid_0's huber: 23.4692
[44]	valid_0's huber: 23.4632
[45]	valid_0's huber: 23.4559
[46]	valid_0's huber: 23.4499
[47]	valid_0's huber: 23.4426
[48]	valid_0's huber: 23.4367
[49]	valid_0's huber: 23.4295
[50]	valid_0's huber: 23.4236
[51]	valid_0's huber: 23.4177
[52]	valid_0's huber: 23.4104
[53]	valid_0's huber: 23.4042
[54]	valid_0's huber: 23.397
[55]	valid_0's huber: 23.3908
[56]	valid_0's huber: 23.3817
[57]	valid_0's huber: 23.3775
[58]	valid_0's huber: 23.3714
[59]	valid_0's huber: 23.3641
[60]	valid_0's huber: 23.3581
[61]	valid_0's huber: 23.3508
[62]	valid_0's huber: 23.3466
[63]	valid_0's huber: 23.3394
[64]	valid_0's huber: 23.3351
[65]	valid_0's huber: 23.3279
[66]	valid_0's huber: 23.3237
[67]	valid_0's huber: 23.3165
[68]	valid_0's huber: 23.3122
[69]	valid_0's huber: 23.3051
[70]	valid_0's huber: 23.299
[71]	valid_0's huber: 23.2948
[72]	valid_0's huber: 23.2876
[73]	valid_0's huber: 23.2833
[74]	valid_0's huber: 23.2762
[75]	valid_0's huber: 23.272
[76]	valid_0's huber: 23.2648
[77]	valid_0's huber: 23.2606
[78]	valid_0's huber: 23.2535
[79]	valid_0's huber: 23.2494
[80]	valid_0's huber: 23.2423
[81]	valid_0's huber: 23.2381
[82]	valid_0's huber: 23.2311
[83]	valid_0's huber: 23.2269
[84]	valid_0's huber: 23.2199
[85]	valid_0's huber: 23.2159
[86]	valid_0's huber: 23.2092
[87]	valid_0's huber: 23.2036
[88]	valid_0's huber: 23.1971
[89]	valid_0's huber: 23.1937
[90]	valid_0's huber: 23.1875
[91]	valid_0's huber: 23.1843
[92]	valid_0's huber: 23.1784
[93]	valid_0's huber: 23.1739
[94]	valid_0's huber: 23.1667
[95]	valid_0's huber: 23.1625
[96]	valid_0's huber: 23.1576
[97]	valid_0's huber: 23.1535
[98]	valid_0's huber: 23.1479
[99]	valid_0's huber: 23.1413
[100]	valid_0's huber: 23.1376
  ('#### Metrics #################################################################',) 
  ('Actual    : ', id
257658    0.49
185960    0.29
420114    1.00
344856    0.60
63468     0.52
          ... 
192103    0.75
87549     0.48
128827    0.59
83183     0.53
57792     0.49
Name: price, Length: 362, dtype: float64) 
  ('Prediction: ', id
257658    0.657372
185960    0.662503
420114    0.695147
344856    0.678468
63468     0.661863
            ...   
192103    0.708309
87549     0.712387
128827    0.708676
83183     0.687261
57792     0.689076
Name: price_pred, Length: 362, dtype: float64) 
  ({'metrics_test':                 metric_name  metric_val  n_sample
0   root_mean_squared_error    0.435622        73
1       mean_absolute_error    0.277542        73
2  explained_variance_score    0.050657        73
3                  r2_score    0.050629        73
4     median_absolute_error    0.198267        73},) 
  ('############ saving model, dfX, columns',) 
  ('D:/_devs/Python01/gitdev/dsa2//data/output/airbnb/airbnb_lightgbm/model/',) 

  ('D:/_devs/Python01/gitdev/dsa2//data/output/airbnb/airbnb_lightgbm/model//colsX.pkl',) 

  ('D:/_devs/Python01/gitdev/dsa2//data/output/airbnb/airbnb_lightgbm/model//coly.pkl',) 
  ({'model_class': 'LGBMRegressor', 'model_path': '', 'model_pars': {'objective': 'huber'}, 'post_process_fun': <function airbnb_lightgbm.<locals>.post_process_fun at 0x00000255E6B6D598>, 'pre_process_pars': {'y_norm_fun': <function airbnb_lightgbm.<locals>.pre_process_fun at 0x00000255E6B90B70>, 'pipe_list': [{'uri': 'source/preprocessors.py::pd_coly', 'pars': {'path_features_store': 'D:/_devs/Python01/gitdev/dsa2//data/output/airbnb/airbnb_lightgbm/features_store/', 'path_pipeline_export': 'D:/_devs/Python01/gitdev/dsa2//data/output/airbnb/airbnb_lightgbm/pipeline/'}, 'cols_family': 'coly', 'cols_out': 'coly', 'type': 'coly'}, {'uri': 'source/preprocessors.py::pd_colnum_bin', 'pars': {'path_features_store': 'D:/_devs/Python01/gitdev/dsa2//data/output/airbnb/airbnb_lightgbm/features_store/', 'path_pipeline_export': 'D:/_devs/Python01/gitdev/dsa2//data/output/airbnb/airbnb_lightgbm/pipeline/'}, 'cols_family': 'colnum', 'cols_out': 'colnum_bin', 'type': ''}, {'uri': 'source/preprocessors.py::pd_colnum_binto_onehot', 'pars': {'path_features_store': 'D:/_devs/Python01/gitdev/dsa2//data/output/airbnb/airbnb_lightgbm/features_store/', 'path_pipeline_export': 'D:/_devs/Python01/gitdev/dsa2//data/output/airbnb/airbnb_lightgbm/pipeline/'}, 'cols_family': 'colnum_bin', 'cols_out': 'colnum_onehot', 'type': ''}, {'uri': 'source/preprocessors.py::pd_colcat_bin', 'pars': {'path_features_store': 'D:/_devs/Python01/gitdev/dsa2//data/output/airbnb/airbnb_lightgbm/features_store/', 'path_pipeline_export': 'D:/_devs/Python01/gitdev/dsa2//data/output/airbnb/airbnb_lightgbm/pipeline/'}, 'cols_family': 'colcat', 'cols_out': 'colcat_bin', 'type': ''}, {'uri': 'source/preprocessors.py::pd_colcat_to_onehot', 'pars': {'path_features_store': 'D:/_devs/Python01/gitdev/dsa2//data/output/airbnb/airbnb_lightgbm/features_store/', 'path_pipeline_export': 'D:/_devs/Python01/gitdev/dsa2//data/output/airbnb/airbnb_lightgbm/pipeline/'}, 'cols_family': 'colcat_bin', 'cols_out': 'colcat_onehot', 'type': ''}, {'uri': 'source/preprocessors.py::pd_coltext', 'pars': {'path_features_store': 'D:/_devs/Python01/gitdev/dsa2//data/output/airbnb/airbnb_lightgbm/features_store/', 'path_pipeline_export': 'D:/_devs/Python01/gitdev/dsa2//data/output/airbnb/airbnb_lightgbm/pipeline/'}, 'cols_family': 'coltext', 'cols_out': 'coltext_svd', 'type': ''}, {'uri': 'source/preprocessors.py::pd_coldate', 'pars': {'path_features_store': 'D:/_devs/Python01/gitdev/dsa2//data/output/airbnb/airbnb_lightgbm/features_store/', 'path_pipeline_export': 'D:/_devs/Python01/gitdev/dsa2//data/output/airbnb/airbnb_lightgbm/pipeline/'}, 'cols_family': 'coldate', 'cols_out': 'coldate', 'type': ''}, {'uri': 'source/preprocessors.py::pd_colcross', 'pars': {'path_features_store': 'D:/_devs/Python01/gitdev/dsa2//data/output/airbnb/airbnb_lightgbm/features_store/', 'path_pipeline_export': 'D:/_devs/Python01/gitdev/dsa2//data/output/airbnb/airbnb_lightgbm/pipeline/', 'dfnum_hot':         review_scores_communication_bin_-1  ...  review_scores_rating_bin_9
id                                          ...                            
21869                                    0  ...                           0
151249                                   0  ...                           0
29279                                    0  ...                           0
38296                                    0  ...                           0
342637                                   0  ...                           0
...                                    ...  ...                         ...
242927                                   0  ...                           0
229075                                   0  ...                           0
189288                                   0  ...                           0
265955                                   0  ...                           1
265408                                   0  ...                           0

[362 rows x 25 columns], 'dfcat_hot':         cancellation_policy_int_0  ...  host_response_time_int_3
id                                 ...                          
21869                           1  ...                         0
151249                          1  ...                         0
29279                           1  ...                         0
38296                           0  ...                         0
342637                          0  ...                         0
...                           ...  ...                       ...
242927                          1  ...                         0
229075                          0  ...                         0
189288                          1  ...                         0
265955                          1  ...                         1
265408                          0  ...                         0

[362 rows x 28 columns], 'colid': 'id', 'colcross_single': ['review_scores_communication', 'review_scores_location', 'cancellation_policy', 'host_response_rate']}, 'cols_family': 'colcross', 'cols_out': 'colcross_pair_onehot', 'type': 'cross'}]}}, {'metric_list': ['root_mean_squared_error', 'mean_absolute_error', 'explained_variance_score', 'r2_score', 'median_absolute_error']}) 
--------------
D:/_devs/Python01/gitdev/dsa2//data/output/airbnb/airbnb_lightgbm/model//model.pkl
  ('############ check re-loaded', {'model_class': 'LGBMRegressor', 'model_path': '', 'model_pars': {'objective': 'huber'}, 'post_process_fun': <function airbnb_lightgbm.<locals>.post_process_fun at 0x00000255E76D36A8>, 'pre_process_pars': {'y_norm_fun': <function airbnb_lightgbm.<locals>.pre_process_fun at 0x00000255E76D39D8>, 'pipe_list': [{'uri': 'source/preprocessors.py::pd_coly', 'pars': {'path_features_store': 'D:/_devs/Python01/gitdev/dsa2//data/output/airbnb/airbnb_lightgbm/features_store/', 'path_pipeline_export': 'D:/_devs/Python01/gitdev/dsa2//data/output/airbnb/airbnb_lightgbm/pipeline/'}, 'cols_family': 'coly', 'cols_out': 'coly', 'type': 'coly'}, {'uri': 'source/preprocessors.py::pd_colnum_bin', 'pars': {'path_features_store': 'D:/_devs/Python01/gitdev/dsa2//data/output/airbnb/airbnb_lightgbm/features_store/', 'path_pipeline_export': 'D:/_devs/Python01/gitdev/dsa2//data/output/airbnb/airbnb_lightgbm/pipeline/'}, 'cols_family': 'colnum', 'cols_out': 'colnum_bin', 'type': ''}, {'uri': 'source/preprocessors.py::pd_colnum_binto_onehot', 'pars': {'path_features_store': 'D:/_devs/Python01/gitdev/dsa2//data/output/airbnb/airbnb_lightgbm/features_store/', 'path_pipeline_export': 'D:/_devs/Python01/gitdev/dsa2//data/output/airbnb/airbnb_lightgbm/pipeline/'}, 'cols_family': 'colnum_bin', 'cols_out': 'colnum_onehot', 'type': ''}, {'uri': 'source/preprocessors.py::pd_colcat_bin', 'pars': {'path_features_store': 'D:/_devs/Python01/gitdev/dsa2//data/output/airbnb/airbnb_lightgbm/features_store/', 'path_pipeline_export': 'D:/_devs/Python01/gitdev/dsa2//data/output/airbnb/airbnb_lightgbm/pipeline/'}, 'cols_family': 'colcat', 'cols_out': 'colcat_bin', 'type': ''}, {'uri': 'source/preprocessors.py::pd_colcat_to_onehot', 'pars': {'path_features_store': 'D:/_devs/Python01/gitdev/dsa2//data/output/airbnb/airbnb_lightgbm/features_store/', 'path_pipeline_export': 'D:/_devs/Python01/gitdev/dsa2//data/output/airbnb/airbnb_lightgbm/pipeline/'}, 'cols_family': 'colcat_bin', 'cols_out': 'colcat_onehot', 'type': ''}, {'uri': 'source/preprocessors.py::pd_coltext', 'pars': {'path_features_store': 'D:/_devs/Python01/gitdev/dsa2//data/output/airbnb/airbnb_lightgbm/features_store/', 'path_pipeline_export': 'D:/_devs/Python01/gitdev/dsa2//data/output/airbnb/airbnb_lightgbm/pipeline/'}, 'cols_family': 'coltext', 'cols_out': 'coltext_svd', 'type': ''}, {'uri': 'source/preprocessors.py::pd_coldate', 'pars': {'path_features_store': 'D:/_devs/Python01/gitdev/dsa2//data/output/airbnb/airbnb_lightgbm/features_store/', 'path_pipeline_export': 'D:/_devs/Python01/gitdev/dsa2//data/output/airbnb/airbnb_lightgbm/pipeline/'}, 'cols_family': 'coldate', 'cols_out': 'coldate', 'type': ''}, {'uri': 'source/preprocessors.py::pd_colcross', 'pars': {'path_features_store': 'D:/_devs/Python01/gitdev/dsa2//data/output/airbnb/airbnb_lightgbm/features_store/', 'path_pipeline_export': 'D:/_devs/Python01/gitdev/dsa2//data/output/airbnb/airbnb_lightgbm/pipeline/', 'dfnum_hot':         review_scores_communication_bin_-1  ...  review_scores_rating_bin_9
id                                          ...                            
21869                                    0  ...                           0
151249                                   0  ...                           0
29279                                    0  ...                           0
38296                                    0  ...                           0
342637                                   0  ...                           0
...                                    ...  ...                         ...
242927                                   0  ...                           0
229075                                   0  ...                           0
189288                                   0  ...                           0
265955                                   0  ...                           1
265408                                   0  ...                           0

[362 rows x 25 columns], 'dfcat_hot':         cancellation_policy_int_0  ...  host_response_time_int_3
id                                 ...                          
21869                           1  ...                         0
151249                          1  ...                         0
29279                           1  ...                         0
38296                           0  ...                         0
342637                          0  ...                         0
...                           ...  ...                       ...
242927                          1  ...                         0
229075                          0  ...                         0
189288                          1  ...                         0
265955                          1  ...                         1
265408                          0  ...                         0

[362 rows x 28 columns], 'colid': 'id', 'colcross_single': ['review_scores_communication', 'review_scores_location', 'cancellation_policy', 'host_response_rate']}, 'cols_family': 'colcross', 'cols_out': 'colcross_pair_onehot', 'type': 'cross'}]}}) 
  ('###### Export ##################################################################',) 
  ('######### finish #################################',) 
